{% extends "base.html" %}
{% load i18n %}
{% block content %}
<section class="card">
    <h1>{% trans "Sales Report" %} </h1>

<form method="get" style="margin-bottom: 20px;">
    {{ form.as_p }}
    <button type="submit">{% trans "Apply Filters" %} </button>
</form>

<hr>

<h2>
{% blocktrans with s=start_date e=end_date %}
    Summary ({{ s }} â†’ {{ e }})
{% endblocktrans %}
</h2>


<p><strong>{% trans "Total Revenue" %} :</strong> ${{ total_revenue }}</p>

{% if highest_selling %}
        <p><strong>{% trans "Highest Selling Product(s)" %} :</strong></p>
        <ul>
            {% for p in highest_selling %}
                <li>{{ p.name }} ({{ p.quantity_sold }} sold)</li>
            {% endfor %}
        </ul>
    {% endif %}

{% if lowest_selling %}
        <p><strong>{% trans "Lowest Selling Product(s)" %} :</strong></p>
        <ul>
            {% for p in lowest_selling %}
                <li>{{ p.name }} ({{ p.quantity_sold }} sold)</li>
            {% endfor %}
        </ul>
    {% endif %}

<br>

<h2>{% trans "Sales Breakdown" %} </h2>

<table cellpadding="6">
        <thead>
            <tr>
                <th>{% trans "Product" %} </th>
                <th>{% trans "Quantity Sold" %} </th>
                <th>{% trans "Revenue " %} ($)</th>
            </tr>
        </thead>

        <tbody>
        {% for product in products %}
            <tr>
                <td>{{ product.name }}</td>
                <td>{{ product.quantity_sold }}</td>
                <td>{{ product.revenue }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="3">{% trans "No products found." %} </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</section>
{% endblock %}