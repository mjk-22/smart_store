{% extends "base.html" %}

{% block content %}
<section class="card">
    <h1>Sales Report</h1>

<form method="get" style="margin-bottom: 20px;">
    {{ form.as_p }}
    <button type="submit">Apply Filters</button>
</form>

<hr>

<h2>Summary ({{ start_date }} -> {{ end_date }})</h2>

<p><strong>Total Revenue:</strong> ${{ total_revenue }}</p>

{% if highest_selling %}
        <p><strong>Highest Selling Product(s):</strong></p>
        <ul>
            {% for p in highest_selling %}
                <li>{{ p.name }} ({{ p.quantity_sold }} sold)</li>
            {% endfor %}
        </ul>
    {% endif %}

{% if lowest_selling %}
        <p><strong>Lowest Selling Product(s):</strong></p>
        <ul>
            {% for p in lowest_selling %}
                <li>{{ p.name }} ({{ p.quantity_sold }} sold)</li>
            {% endfor %}
        </ul>
    {% endif %}

<br>

<h2>Sales Breakdown</h2>

<table cellpadding="6">
        <thead>
            <tr>
                <th>Product</th>
                <th>Quantity Sold</th>
                <th>Revenue ($)</th>
            </tr>
        </thead>

        <tbody>
        {% for product in products %}
            <tr>
                <td>{{ product.name }}</td>
                <td>{{ product.quantity_sold }}</td>
                <td>{{ product.revenue }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="3">No products found.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</section>
{% endblock %}